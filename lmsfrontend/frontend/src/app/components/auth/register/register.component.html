<div class="min-h-screen bg-gray-100 dark:bg-gray-900 py-6 flex flex-col justify-center sm:py-12">
    <!-- Dark Mode Toggle -->
    <div class="absolute top-4 right-4">
        <button 
            (click)="toggleDarkMode()"
            class="px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-200"
        >
            {{ isDarkMode ? 'ðŸŒž Light Mode' : 'ðŸŒ™ Dark Mode' }}
        </button>
    </div>

    <div class="relative py-3 sm:max-w-xl sm:mx-auto">
        <!-- Decorative background -->
        <div class="absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl"></div>
        
        <!-- Main content -->
        <div class="relative px-4 py-10 bg-white dark:bg-gray-800 shadow-lg sm:rounded-3xl sm:p-20">
            <div class="max-w-md mx-auto">
                <div class="divide-y divide-gray-200 dark:divide-gray-700">
                    <div class="py-8 text-base leading-6 space-y-4 text-gray-700 dark:text-gray-300 sm:text-lg sm:leading-7">
                        <h1 class="text-3xl font-bold text-center mb-8 text-gray-900 dark:text-white">Registration Form</h1>

                        <!-- Success Message -->
                        <div *ngIf="message" class="mb-4 p-4 rounded-md bg-green-50 dark:bg-green-900/50 border border-green-200 dark:border-green-800">
                            <p class="text-green-700 dark:text-green-300 text-center text-sm font-medium">
                                {{ message }}
                            </p>
                        </div>

                        <!-- Error Message -->
                        <div *ngIf="errormessage" class="mb-4 p-4 rounded-md bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800">
                            <p class="text-red-700 dark:text-red-300 text-center text-sm font-medium">
                                {{ errormessage }}
                            </p>
                        </div>

                        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-6">
                            <!-- Username -->
                            <div class="relative">
                                <input 
                                    type="text" 
                                    id="username" 
                                    formControlName="username"
                                    class="peer w-full border-b-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-transparent focus:outline-none focus:border-blue-600 dark:focus:border-blue-500 bg-transparent"
                                    placeholder="Username"
                                    required
                                >
                                <label 
                                    for="username"
                                    class="absolute left-0 -top-3.5 text-gray-600 dark:text-gray-400 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-focus:-top-3.5 peer-focus:text-gray-600 dark:peer-focus:text-gray-400 peer-focus:text-sm"
                                >
                                    Username
                                </label>
                                <small class="text-red-500 text-xs mt-1" *ngIf="registerForm.controls['username'].hasError('required') && registerForm.controls['username'].touched">
                                    Username is required
                                </small>
                                <small class="text-red-500 text-xs mt-1" *ngIf="registerForm.controls['username'].hasError('pattern') && registerForm.controls['username'].touched">
                                    Username must contain only letters, no spaces or special characters
                                </small>
                            </div>

                            <!-- Email -->
                            <div class="relative">
                                <input 
                                    type="email" 
                                    id="email" 
                                    formControlName="email"
                                    class="peer w-full border-b-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-transparent focus:outline-none focus:border-blue-600 dark:focus:border-blue-500 bg-transparent"
                                    placeholder="Email"
                                    required
                                >
                                <label 
                                    for="email"
                                    class="absolute left-0 -top-3.5 text-gray-600 dark:text-gray-400 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-focus:-top-3.5 peer-focus:text-gray-600 dark:peer-focus:text-gray-400 peer-focus:text-sm"
                                >
                                    Email Address
                                </label>
                                <small class="text-red-500 text-xs mt-1" *ngIf="registerForm.controls['email'].hasError('required') && registerForm.controls['email'].touched">
                                    Email is required
                                </small>
                                <small class="text-red-500 text-xs mt-1" *ngIf="registerForm.controls['email'].hasError('email') && registerForm.controls['email'].touched">
                                    Please enter a valid email
                                </small>
                            </div>

                            <!-- Password -->
                           <!-- Password -->
<div class="relative">
    <div class="relative">
        <input 
            [type]="showPassword ? 'text' : 'password'"
            id="password" 
            formControlName="password"
            class="peer w-full border-b-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-transparent focus:outline-none focus:border-blue-600 dark:focus:border-blue-500 bg-transparent"
            placeholder="Password"
            required
        >
        <button 
            type="button"
            (click)="togglePassword()"
            class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 focus:outline-none"
        >
            <i class="material-icons text-xl">{{ showPassword ? 'visibility_off' : 'visibility' }}</i>
        </button>
        <label 
            for="password"
            class="absolute left-0 -top-3.5 text-gray-600 dark:text-gray-400 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-focus:-top-3.5 peer-focus:text-gray-600 dark:peer-focus:text-gray-400 peer-focus:text-sm"
        >
            Password
        </label>
        <small class="text-red-500 text-xs mt-1" *ngIf="registerForm.controls['password'].hasError('required') && registerForm.controls['password'].touched">
            Password is required
        </small>
        <small class="text-red-500 text-xs mt-1" *ngIf="registerForm.controls['password'].hasError('minlength') && registerForm.controls['password'].touched">
            Password must be at least 8 characters
        </small>
        <small class="text-red-500 text-xs mt-1" *ngIf="registerForm.controls['password'].hasError('pattern') && registerForm.controls['password'].touched">
            Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character ("&#64;", $, !, %, *, ?)
        </small>
    </div>
</div>

<!-- Confirm Password -->
<div class="relative">
    <div class="relative">
        <input 
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmpassword" 
            formControlName="confirmpassword"
            class="peer w-full border-b-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-transparent focus:outline-none focus:border-blue-600 dark:focus:border-blue-500 bg-transparent"
            placeholder="Confirm Password"
            required
        >
        <button 
            type="button"
            (click)="toggleConfirmPassword()"
            class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 focus:outline-none"
        >
            <i class="material-icons text-xl">{{ showConfirmPassword ? 'visibility_off' : 'visibility' }}</i>
        </button>
        <label 
            for="confirmpassword"
            class="absolute left-0 -top-3.5 text-gray-600 dark:text-gray-400 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-focus:-top-3.5 peer-focus:text-gray-600 dark:peer-focus:text-gray-400 peer-focus:text-sm"
        >
            Confirm Password
        </label>
        <small class="text-red-500 text-xs mt-1" *ngIf="registerForm.controls['confirmpassword'].hasError('required') && registerForm.controls['confirmpassword'].touched">
            Confirm Password is required
        </small>
        <small class="text-red-500 text-xs mt-1" *ngIf="registerForm.hasError('passwordMismatch') && registerForm.controls['confirmpassword'].touched">
            Passwords do not match
        </small>
    </div>
</div>

                            <!-- Submit Button -->
                            <button 
                                type="submit" 
                                [disabled]="registerForm.invalid || isSubmitted"
                                class="w-full py-3 mt-8 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg shadow-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
                            >
                                {{isSubmitted?'Registering...':'Register'}}
                            </button>

                            <!-- Login Link -->
                            <div class="text-center mt-4">
                                <a 
                                    [routerLink]="['/student/login']" 
                                    class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200"
                                >
                                    Already have an account? Login
                                </a>
                            </div>
                        </form>

                        <!-- Instructor Registration Link -->
                        <div class="text-center mt-6">
                            <a 
                                [routerLink]="['/instructor/register']" 
                                class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 transition-colors duration-200 font-semibold"
                            >
                                Want to be an Instructor? Register here
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>